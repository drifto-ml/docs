---
title: "CREATE MODEL"
---

`CREATE MODEL`: This statement allows you to invoke Driftoâ€™s autoML
capabilities. `CREATE MODEL` creates a new model that is stored in your model
registry with the given name. By default, Drifto uses an internal 
[MLflow](www.mlflow.org) instance, but can be configured to use an external 
instance as well. Like regular create statements, one should use 
`CREATE OR REPLACE MODEL` to overwrite an existing model with the same name.

The `SELECT` subquery in the create statement should return the full training 
dataset (held-out sets are automatically subsampled but can be manually specified 
as well). 

Each row in the dataset corresponds to one data point for ML training and 
each column is a feature. The `WITH` clause is optional but for ML training 
and each column is a feature. The `WITH` clause is optional but the target 
column to be called `target`.

The ML training routine will train and validate a variety of ML architectures.
You can control this automated model search with argument flags.  

### Syntax

```sql
CREATE MODEL <MODEL> WITH (**kwargs) AS <SELECT>;
```

### Keyword Args

<ParamField query="target" type="column or string literal" default="target">
  The name of the target column.
</ParamField>

<ParamField query="algo" type="string literal" default="auto">
  The training algorithm. 
  Options = `{'auto', 'gbm', 'linear', 'dnn'}`.
    - The `'auto'` option selects an autoML routine that will try multiple
  different algorithms and hyperparameters and select the best one.
    - The `'gbm'` option selects a gradient-boosting algorithm.
    - The `'linear'` option selects a generalized linear model.
    - The `'dnn'` option selects a fully-connected feed-forward deep neural net.
</ParamField>

<ParamField query="ensemble" type="boolean literal" default="false">
  Allow autoML algorithm to generate model ensembles.
</ParamField>

<ParamField query="max_models" type="int literal" default="3">
  Maximum number of models to search for in an ML training routine.
</ParamField>

<ParamField query="seed" type="int literal" default="1">
  Random seed to use.
</ParamField>

<ParamField query="sort_metric" type="string literal" default="5">
  The figure-of-merit used to select the best model.
  Options (Classification) = `{'auc', 'accu', 'logloss'}`.
  Options (Regression) = `{'mse', 'mae', 'r2'}`
</ParamField>


### Example

```sql
CREATE MODEL my_model 
WITH (target=y, max_models=10, sort_metric='logloss') 
AS SELECT * FROM mydata;
```

```sql
-- This will overwrite an existing model.
CREATE MODEL OR REPLACE my_other_model 
WITH (max_models=1, algo='linear') 
AS SELECT * FROM mydata;
```
